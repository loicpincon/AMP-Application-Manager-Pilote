<div *ngIf="datasources">
    <div class="header">
        <h3>Datasource</h3>
    </div>
    <div class="container">
        <div fxLayout fxLayout.xs="column">
            <div fxFlex fxLayout="column">
                <mat-card class="blocInstance">
                    <div class="blocInstanceHeader">
                        <mat-card-title class="blocInstanceTitre">
                            <a><i class="material-icons iconAdd" matTooltip="Ajouter une instance">add</i></a>
                            <h5>DataSource</h5>
                        </mat-card-title>
                    </div>
                    <mat-card-content class="contentInstance">
                        <mat-select [(ngModel)]="typeChoisi">
                            <mat-option *ngFor="let base of templatesDS" [value]="base">
                                {{base}}
                            </mat-option>
                        </mat-select>
                        <button mat-button (click)="ajouter()"
                            style="background-color: #3ac569;float: right;">Ajouter</button>
                        <mat-list>
                            <mat-list-item *ngFor="let datas of datasources">
                                <div>
                                    {{datas.type}}
                                </div>
                                <div>
                                    <button mat-button (click)="consulter(datas)"
                                        style="background-color: #3ac569;float: right;">Consulter</button>
                                </div>
                            </mat-list-item>
                        </mat-list>
                    </mat-card-content>
                </mat-card>
            </div>
            <div fxFlex>

                <mat-card class="blocInstance" *ngIf="datasource">
                    <div class="blocInstanceHeader">
                        <mat-card-title class="blocInstanceTitre">
                            <a (click)="alert('Il faut coder la modal')"><i class="material-icons iconAdd"
                                    matTooltip="Ajouter une instance">add</i></a>
                            <h5>Mysql</h5>
                        </mat-card-title>
                    </div>
                    <mat-card-content class="contentInstance">

                        <div fxLayout fxLayout.xs="column">
                            <table style="text-align: left;width: 100%;">
                                <tbody>
                                    <tr>
                                        <th>Base de donn√©es</th>
                                        <td>
                                            <mat-select [(ngModel)]="envChoisi">
                                                <mat-option *ngFor="let base of datasource.bases" [value]="base">
                                                    {{base.name}}
                                                </mat-option>
                                            </mat-select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th>Serveur</th>
                                        <td>{{datasource.ip}}</td>
                                    </tr>
                                    <tr>
                                        <th>Port</th>
                                        <td>{{datasource.port}}</td>
                                    </tr>

                                    <tr *ngIf="envChoisi">
                                        <th>Utilisateur</th>
                                        <td>{{envChoisi.user}}</td>
                                    </tr>
                                    <tr *ngIf="envChoisi">
                                        <th>Password</th>
                                        <td>{{envChoisi.password}}</td>
                                    </tr>

                                </tbody>

                            </table>
                        </div>



                        <input type="text" [(ngModel)]="newBase">
                        <button mat-button (click)="insererBase()" style="background-color: #3ac569;">Execute</button>




                        <div *ngIf="envChoisi" fxLayout fxLayout.xs="column">
                            <textarea [(ngModel)]="requeteA" rows="10" fxFlex
                                style="align-content:center; overflow:auto; ">
{{requeteA}}
                           </textarea>
                            <button mat-button (click)="executerRequeteSQL()"
                                style="background-color: #3ac569;">Execute</button>

                        </div>
                        <div *ngIf="envChoisi && requeteR" fxLayout fxLayout.xs="column">
                            <div
                                style="align-content:center; width: 100%; background-color: black;color: white;border: 1px solid white;">
                                <table style="border: 1px solid white;">
                                    <tbody>
                                        <tr *ngFor="let t of requeteR">
                                            <td *ngFor="let tbis of t">{{tbis}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                        </div>



                    </mat-card-content>
                </mat-card>
            </div>
        </div>

    </div>
</div>